{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5507656f4a29de07ca0f","webpack:///./src/main.js","webpack:///external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack:///external {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":\"ReactDOM\"}","webpack:///external {\"commonjs\":\"nestedtypes\",\"commonjs2\":\"nestedtypes\",\"amd\":\"nestedtypes\",\"root\":\"Nested\"}","webpack:///./src/createClass.js","webpack:///./src/component-view.js","webpack:///./src/view-element.js","webpack:///./src/valuelink.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,yCAAwC,sBAAsB,EAAE;AAChE;;AAEA;AACA,YAAW,kBAAkB,qCAAqC,EAAE,EAAE;AACtE,YAAW,kBAAkB,qBAAqB,EAAE,EAAE;AACtD,YAAW,yBAAyB,6BAA6B,EAAE;AACnE,EAAC;;AAED;AACA;;AAEA;AACA;;AAEA,oCAAmC,mCAAmC;;AAEtE;AACA;;AAEA;AACA;AACA;;;;;;;AC9CA,gD;;;;;;ACAA,gD;;;;;;ACAA,gD;;;;;;ACAA;AACA;;AAEA,wBAAuB,oBAAoB;;AAE3C;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,4CAA2C,wBAAwB;AACnE;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,gFAA+E,yBAAyB;AACxG;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;;AAEA,yCAAwC,QAAQ;AAChD;AACA;AACA,4CAA2C;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;ACvGA;AACA;;AAEA;AACA,4DAA2D;AAC3D;;AAEA;AACA;AACA,wBAAuB;AACvB;;AAEA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;AACb,UAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;;;;;;AC1EA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;AChFD;;AAEA;AACA;AACA;AACA,8BAA6B,mBAAmB,EAAE;AAClD,mCAAkC,iBAAiB;AACnD;AACA,MAAK;;AAEL,qCAAoC,iBAAiB,EAAE;AACvD,yBAAwB,yBAAyB,EAAE;;AAEnD,uBAAsB,+CAA+C,EAAE;AACvE,uBAAsB,+CAA+C;AACrE,EAAC;;AAED;AACA;AACA,+BAA8B,sBAAsB;AACpD,oCAAmC,qBAAqB;AACxD,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA,+BAA8B,8BAA8B;AAC5D,oCAAmC,iCAAiC;AACpE;AACA,EAAC;;AAED;AACA;AACA,+BAA8B,wCAAwC;;AAEtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA,+BAA8B,2CAA2C;AACzE,oCAAmC,iCAAiC;AACpE;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA,MAAK;;AAEL,4CAA2C,iBAAiB;AAC5D;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,gBAAgB;AACnC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,oBAAmB,gBAAgB;AACnC;AACA;AACA;;AAEA;AACA,E","file":"./nestedreact.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"), require(\"nestedtypes\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dom\", \"nestedtypes\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"React\"] = factory(require(\"react\"), require(\"react-dom\"), require(\"nestedtypes\"));\n\telse\n\t\troot[\"React\"] = factory(root[\"React\"], root[\"ReactDOM\"], root[\"Nested\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5507656f4a29de07ca0f\n **/","var React    = require( 'react' ),\r\n    ReactDOM = require( 'react-dom' ),\r\n    Nested   = require( 'nestedtypes' ),\r\n    $        = Nested.$;\r\n\r\n// extend React namespace\r\nvar NestedReact = module.exports = Object.create( React );\r\n\r\n// listenToProps, listenToState, model, attributes, Model\r\nNestedReact.createClass = require( './createClass' );\r\n\r\nvar ComponentView = require( './component-view' );\r\n\r\n// export hook to override base View class used...\r\nNestedReact.useView = function( View ){\r\n    NestedReact._BaseView = ComponentView.use( View );\r\n};\r\n\r\nNestedReact.useView( Nested.View );\r\n\r\n// React component for attaching views\r\nNestedReact.subview = require( './view-element' );\r\n\r\n// Extend react components to have backbone-style jquery accessors\r\nvar Component     = React.createClass( { render : function(){} } ),\r\n    BaseComponent = Object.getPrototypeOf( Component.prototype );\r\n\r\nObject.defineProperties( BaseComponent, {\r\n    el  : { get : function(){ return ReactDOM.findDOMNode( this ); } },\r\n    $el : { get : function(){ return $( this.el ); } },\r\n    $   : { value : function( sel ){ return this.$el.find( sel ); } }\r\n} );\r\n\r\nvar Link = NestedReact.Link = require( './valuelink' );\r\nNested.valueLink = Link.valueLink;\r\n\r\nvar ModelProto = Nested.Model.prototype,\r\n    LinkAttr   = Link.Attr;\r\n\r\nModelProto.lget = function( name ){ return new LinkAttr( this, name ); };\r\n\r\nvar CollectionProto = Nested.Collection.prototype,\r\n    LinkHas         = Link.CollectionHas;\r\n\r\nCollectionProto.lhas = function( model ){\r\n    return new LinkHas( this, model );\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/main.js\n ** module id = 0\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":\"ReactDOM\"}\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"commonjs\":\"nestedtypes\",\"commonjs2\":\"nestedtypes\",\"amd\":\"nestedtypes\",\"root\":\"Nested\"}\n ** module id = 3\n ** module chunks = 0\n **/","var React    = require( 'react' ),\r\n    Nested   = require( 'nestedtypes' );\r\n\r\nfunction forceUpdate(){ this.forceUpdate(); }\r\n\r\nvar Events = Object.assign( {\r\n    componentWillUnmount : function(){\r\n        this.stopListening();\r\n    }\r\n}, Nested.Events );\r\n\r\nvar ListenToProps = {\r\n    componentDidMount : function(){\r\n        var props    = this.props,\r\n            updateOn = this.listenToProps;\r\n\r\n        for( var prop in updateOn ){\r\n            var emitter = props[ prop ];\r\n            emitter && this.listenTo( emitter, updateOn[ prop ], forceUpdate );\r\n        }\r\n    }\r\n};\r\n\r\nvar ModelState = {\r\n    listenToState : 'change',\r\n    model         : null,\r\n\r\n    getInitialState : function(){\r\n        this.model = new this.Model();\r\n        // enable owner references in the model to access component props\r\n        this.model._owner = this;\r\n\r\n        return this.model;\r\n    },\r\n\r\n    // reference global store to fix model's store locator\r\n    getStore : function(){\r\n        this.model._defaultStore;\r\n    },\r\n\r\n    componentDidMount : function(){\r\n        var events = this.listenToState;\r\n        events && this.listenTo( this.model, events, forceUpdate );\r\n    },\r\n\r\n    componentWillUnmount : function(){\r\n        this.model._owner = null;\r\n        this.model.stopListening();\r\n    }\r\n};\r\n\r\nfunction createClass( spec ){\r\n    var mixins = spec.mixins || ( spec.mixins = [] );\r\n\r\n    var attributes = getModelAttributes( spec );\r\n    if( attributes ){\r\n        var BaseModel = spec.Model || Nested.Model;\r\n        spec.Model    = BaseModel.extend( { defaults : attributes } );\r\n    }\r\n\r\n    if( spec.Model ) mixins.push( ModelState );\r\n\r\n    if( spec.listenToProps ) mixins.unshift( ListenToProps );\r\n\r\n    mixins.push( Events );\r\n\r\n    var component  = React.createClass( spec );\r\n\r\n    // attach lazily evaluated backbone View class\r\n    var NestedReact = this;\r\n\r\n    Object.defineProperty( component, 'View', {\r\n        get : function(){\r\n            return this._View || ( this._View = NestedReact._BaseView.extend( { reactClass : component } ) );\r\n        }\r\n    });\r\n\r\n    return component;\r\n}\r\n\r\nfunction getModelAttributes( spec ){\r\n    var attributes = null;\r\n\r\n    for( var i = spec.mixins.length - 1; i >= 0; i-- ){\r\n        var mixin = spec.mixins[ i ];\r\n        if( mixin.attributes ){\r\n            attributes || ( attributes = {} );\r\n            Object.assign( attributes, mixin.attributes );\r\n        }\r\n    }\r\n\r\n    if( spec.attributes ){\r\n        if( attributes ){\r\n            Object.assign( attributes, spec.attributes );\r\n        }\r\n        else{\r\n            attributes = spec.attributes;\r\n        }\r\n    }\r\n\r\n    return attributes;\r\n}\r\n\r\nmodule.exports = createClass;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/createClass.js\n ** module id = 4\n ** module chunks = 0\n **/","var React    = require( 'react' ),\r\n    ReactDOM = require( 'react-dom' );\r\n\r\nmodule.exports.use = function( View ){\r\n    var dispose    = View.prototype.dispose || function(){},\r\n        setElement = View.prototype.setElement;\r\n\r\n    var ComponentView = View.extend( {\r\n        reactClass : null,\r\n        props      : {},\r\n        element    : null,\r\n\r\n        initialize : function( props ){\r\n            // memorise arguments to pass to React\r\n            this.options = props || {};\r\n            this.element = React.createElement( this.reactClass, this.options );\r\n        },\r\n\r\n        setElement : function(){\r\n            this.unmountComponent();\r\n            return setElement.apply( this, arguments );\r\n        },\r\n\r\n        // cached instance of react component...\r\n        component : null,\r\n        prevState : null,\r\n\r\n        render : function(){\r\n            var component = ReactDOM.render( this.element, this.el );\r\n            this.component || this.mountComponent( component );\r\n        },\r\n\r\n        mountComponent : function( component ){\r\n            this.component = component;\r\n\r\n            if( this.prevState ){\r\n                component.model.set( this.prevState );\r\n                this.prevState = null;\r\n            }\r\n\r\n            component.trigger && this.listenTo( component, 'all', function(){\r\n                this.trigger.apply( this, arguments );\r\n            });\r\n        },\r\n\r\n        unmountComponent : function(){\r\n            var component = this.component;\r\n\r\n            if( component ){\r\n                this.prevState = component.model && component.model.attributes;\r\n\r\n                if( component.trigger ){\r\n                    this.stopListening( component );\r\n                }\r\n\r\n                ReactDOM.unmountComponentAtNode( this.el );\r\n                this.component = null;\r\n            }\r\n        },\r\n\r\n        dispose : function(){\r\n            this.unmountComponent();\r\n            return dispose.apply( this, arguments );\r\n        }\r\n    } );\r\n\r\n    Object.defineProperty( ComponentView.prototype, 'model', {\r\n        get : function(){\r\n            this.component || this.render();\r\n            return this.component && this.component.model;\r\n        }\r\n    } );\r\n\r\n    return ComponentView;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/component-view.js\n ** module id = 5\n ** module chunks = 0\n **/","var React = require( 'react' );\r\n\r\nfunction shallowEqual(objA, objB) {\r\n    if (objA === objB) {\r\n        return true;\r\n    }\r\n\r\n    if (typeof objA !== 'object' || objA === null ||\r\n        typeof objB !== 'object' || objB === null) {\r\n        return false;\r\n    }\r\n\r\n    var keysA = Object.keys(objA);\r\n    var keysB = Object.keys(objB);\r\n\r\n    if (keysA.length !== keysB.length) {\r\n        return false;\r\n    }\r\n\r\n    // Test for A's keys different from B.\r\n    var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\r\n    for (var i = 0; i < keysA.length; i++) {\r\n        if (!bHasOwnProperty(keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nmodule.exports = React.createClass({\r\n    displayName : 'BackboneView',\r\n\r\n    propTypes : {\r\n        View : React.PropTypes.func.isRequired,\r\n        options : React.PropTypes.object\r\n    },\r\n\r\n    shouldComponentUpdate : function( next ){\r\n        var props = this.props;\r\n        return next.View !== props.View || !shallowEqual( next.options, props.options );\r\n    },\r\n\r\n    render : function(){\r\n        return React.DOM.div({\r\n            ref : 'subview',\r\n            className : this.props.className\r\n        });\r\n    },\r\n\r\n    componentDidMount : function(){\r\n        this._mountView();\r\n    },\r\n    componentDidUpdate : function(){\r\n        this._dispose();\r\n        this._mountView();\r\n    },\r\n    componentWillUnmount : function(){\r\n        this._dispose();\r\n    },\r\n\r\n    _mountView: function () {\r\n        var el = this.refs.subview,\r\n            p = this.props;\r\n\r\n        var view = this.view = p.options ? new p.View( p.options ) : new p.View();\r\n\r\n        el.appendChild( view.el );\r\n        view.render();\r\n    },\r\n\r\n    _dispose : function(){\r\n        var view = this.view;\r\n        if( view ){\r\n            view.stopListening();\r\n            if( view.dispose ) view.dispose();\r\n            this.refs.subview.innerHTML = \"\";\r\n            this.view = null;\r\n        }\r\n    }\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/view-element.js\n ** module id = 6\n ** module chunks = 0\n **/","var Nested = require( 'nestedtypes' );\r\n\r\nvar Value = exports.Value = Object.extend( {\r\n    properties :{\r\n        value : {\r\n            get : function(){ return this.get(); },\r\n            set : function( val ){ this.set( val ); }\r\n        }\r\n    },\r\n\r\n    requestChange : function( val ){ this.set( val ); },\r\n    toggle : function(){ this.set( !this.get() ); },\r\n\r\n    get  : function(){ throw new ReferenceError( 'Not implemented' ); },\r\n    set  : function(){ throw new ReferenceError( 'Not implemented' ); }\r\n} );\r\n\r\nexports.Attr = Value.extend( {\r\n    constructor : function( model, attr ){\r\n        this.get = function(){ return model[ attr ]; };\r\n        this.set = function( val ){ model[ attr ] = val; };\r\n    },\r\n\r\n    // create boolean link for value in array\r\n    lhas : function( value ){\r\n        return new ArrayHas( this, value );\r\n    },\r\n\r\n    // create boolean link for value equality\r\n    leql : function( value ){\r\n        return new ValueEql( this, value );\r\n    }\r\n} );\r\n\r\nvar ValueEql = exports.ValueEql = Value.extend( {\r\n    constructor : function( link, asTrue ){\r\n        this.get = function(){ return link.get() === asTrue; };\r\n        this.set = function( val ){ link.set( val ? asTrue : null ); };\r\n    }\r\n} );\r\n\r\nvar ArrayHas = exports.ArrayHas = Value.extend( {\r\n    constructor : function( link, element ){\r\n        this.get = function(){ return contains( link.get(), element ); };\r\n\r\n        this.set = function( next ){\r\n            var arr = link.get();\r\n            if( contains( arr, element ) !== Boolean( next ) ){\r\n                link.set( next ? arr.concat( element ) : without( arr, element ) );\r\n            }\r\n        };\r\n    }\r\n} );\r\n\r\nexports.CollectionHas = Value.extend( {\r\n    constructor : function( collection, model ){\r\n        this.get = function(){ return Boolean( collection.get( model ) ); };\r\n        this.set = function( val ){ collection.toggle( model, val ); };\r\n    }\r\n} );\r\n\r\nexports.valueLink = function( reference ){\r\n    var getMaster = Nested.parseReference( reference );\r\n\r\n    function setLink( value ){\r\n        var link = getMaster.call( this );\r\n        link && link.set( value );\r\n    }\r\n\r\n    function getLink(){\r\n        var link = getMaster.call( this );\r\n        return link && link.get();\r\n    }\r\n\r\n    var LinkAttribute = Nested.attribute.Type.extend( {\r\n        createPropertySpec : function(){\r\n            return {\r\n                // call to optimized set function for single argument. Doesn't work for backbone types.\r\n                set : setLink,\r\n\r\n                // attach get hook to the getter function, if present\r\n                get : getLink\r\n            }\r\n        },\r\n\r\n        set : setLink\r\n    } );\r\n\r\n    var options       = Nested.attribute( { toJSON : false } );\r\n    options.Attribute = LinkAttribute;\r\n    return options;\r\n};\r\n\r\n// private array helpers\r\nfunction contains( arr, el ){\r\n    for( var i = 0; i < arr.length; i++ ){\r\n        if( arr[ i ] === el ) return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction without( arr, el ){\r\n    var res = [];\r\n\r\n    for( var i = 0; i < arr.length; i++ ){\r\n        var current = arr[ i ];\r\n        current === el || res.push( current );\r\n    }\r\n\r\n    return res;\r\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/valuelink.js\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":""}