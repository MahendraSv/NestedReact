{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 881148921323392a4ef8","webpack:///./src/main.js","webpack:///external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack:///external {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":\"ReactDOM\"}","webpack:///external {\"commonjs\":\"nestedtypes\",\"commonjs2\":\"nestedtypes\",\"amd\":\"nestedtypes\",\"root\":\"Nested\"}","webpack:///./src/createClass.js","webpack:///./src/component-view.js","webpack:///./src/view-element.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,yCAAwC,sBAAsB,EAAE;AAChE;;AAEA;AACA,YAAW,kBAAkB,qCAAqC,EAAE,EAAE;AACtE,YAAW,kBAAkB,qBAAqB,EAAE,EAAE;AACtD,YAAW,yBAAyB,6BAA6B,EAAE;AACnE,EAAC;;;;;;;AC/BD,gD;;;;;;ACAA,gD;;;;;;ACAA,gD;;;;;;ACAA;AACA;;AAEA,wBAAuB,oBAAoB;;AAE3C;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,4CAA2C,wBAAwB;AACnE;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,gFAA+E,wBAAwB;AACvG;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;;AAEA,yCAAwC,QAAQ;AAChD;AACA;AACA,4CAA2C;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;AC7FA;AACA;;AAEA;AACA,4DAA2D;AAC3D;;AAEA;AACA;AACA,wBAAuB;AACvB;;AAEA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;;;;;;ACnEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC","file":"./nestedreact.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"), require(\"nestedtypes\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dom\", \"nestedtypes\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"React\"] = factory(require(\"react\"), require(\"react-dom\"), require(\"nestedtypes\"));\n\telse\n\t\troot[\"React\"] = factory(root[\"React\"], root[\"ReactDOM\"], root[\"Nested\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 881148921323392a4ef8\n **/","var React    = require( 'react' ),\r\n    ReactDOM = require( 'react-dom' ),\r\n    Nested   = require( 'nestedtypes' ),\r\n    $        = Nested.$;\r\n\r\n// extend React namespace\r\nvar NestedReact = module.exports = Object.create( React );\r\n\r\n// listenToProps, listenToState, model, attributes, Model\r\nNestedReact.createClass = require( './createClass' );\r\n\r\nvar ComponentView = require( './component-view' );\r\n\r\n// export hook to override base View class used...\r\nNestedReact.useView = function( View ){\r\n    NestedReact._BaseView = ComponentView.use( View );\r\n};\r\n\r\nNestedReact.useView( Nested.View );\r\n\r\n// React component for attaching views\r\nNestedReact.subview = require( './view-element' );\r\n\r\n// Extend react components to have backbone-style jquery accessors\r\nvar Component     = React.createClass( { render : function(){} } ),\r\n    BaseComponent = Object.getPrototypeOf( Component.prototype );\r\n\r\nObject.defineProperties( BaseComponent, {\r\n    el  : { get : function(){ return ReactDOM.findDOMNode( this ); } },\r\n    $el : { get : function(){ return $( this.el ); } },\r\n    $   : { value : function( sel ){ return this.$el.find( sel ); } }\r\n} );\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/main.js\n ** module id = 0\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":\"ReactDOM\"}\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"commonjs\":\"nestedtypes\",\"commonjs2\":\"nestedtypes\",\"amd\":\"nestedtypes\",\"root\":\"Nested\"}\n ** module id = 3\n ** module chunks = 0\n **/","var React    = require( 'react' ),\r\n    Nested   = require( 'nestedtypes' );\r\n\r\nfunction forceUpdate(){ this.forceUpdate(); }\r\n\r\nvar Events = Object.assign( {\r\n    componentWillUnmount : function(){\r\n        this.stopListening();\r\n    }\r\n}, Nested.Events );\r\n\r\nvar ListenToProps = {\r\n    componentDidMount : function(){\r\n        var props    = this.props,\r\n            updateOn = this.listenToProps;\r\n\r\n        for( var prop in updateOn ){\r\n            var emitter = props[ prop ];\r\n            emitter && this.listenTo( emitter, updateOn[ prop ], forceUpdate );\r\n        }\r\n    }\r\n};\r\n\r\nvar ModelState = {\r\n    listenToState : 'change',\r\n    model         : null,\r\n\r\n    getInitialState : function(){\r\n        return this.model = new this.Model();\r\n    },\r\n\r\n    componentDidMount : function(){\r\n        var events = this.listenToState;\r\n        events && this.listenTo( this.model, events, forceUpdate );\r\n    },\r\n\r\n    componentWillUnmount : function(){\r\n        this.model.stopListening();\r\n    }\r\n};\r\n\r\nfunction createClass( spec ){\r\n    var mixins = spec.mixins || ( spec.mixins = [] );\r\n\r\n    var attributes = getModelAttributes( spec );\r\n    if( attributes ){\r\n        var BaseModel = spec.Model || Nested.Model;\r\n        spec.Model    = BaseModel.extend( { defaults : attributes } );\r\n    }\r\n\r\n    if( spec.Model ) mixins.push( ModelState );\r\n\r\n    if( spec.listenToProps ) mixins.unshift( ListenToProps );\r\n\r\n    mixins.push( Events );\r\n\r\n    var component  = React.createClass( spec );\r\n\r\n    // attach lazily evaluated backbone View class\r\n    var NestedReact = this;\r\n\r\n    Object.defineProperty( component, 'View', {\r\n        get : function(){\r\n            return this._View || ( this._View = NestedReact._BaseView.extend( { component : component } ) );\r\n        }\r\n    });\r\n\r\n    return component;\r\n}\r\n\r\nfunction getModelAttributes( spec ){\r\n    var attributes = null;\r\n\r\n    for( var i = spec.mixins.length - 1; i >= 0; i-- ){\r\n        var mixin = spec.mixins[ i ];\r\n        if( mixin.attributes ){\r\n            attributes || ( attributes = {} );\r\n            Object.assign( attributes, mixin.attributes );\r\n        }\r\n    }\r\n\r\n    if( spec.attributes ){\r\n        if( attributes ){\r\n            Object.assign( attributes, spec.attributes );\r\n        }\r\n        else{\r\n            attributes = spec.attributes;\r\n        }\r\n    }\r\n\r\n    return attributes;\r\n}\r\n\r\nmodule.exports = createClass;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/createClass.js\n ** module id = 4\n ** module chunks = 0\n **/","var React    = require( 'react' ),\r\n    ReactDOM = require( 'react-dom' );\r\n\r\nmodule.exports.use = function( View ){\r\n    var dispose    = View.prototype.dispose || function(){},\r\n        setElement = View.prototype.setElement;\r\n\r\n    var ComponentView = View.extend( {\r\n        reactClass : null,\r\n        props      : {},\r\n        element    : null,\r\n\r\n        initialize : function( props ){\r\n            // memorise arguments to pass to React\r\n            this.options = props || {};\r\n            this.element = React.createElement( this.reactClass, this.options );\r\n        },\r\n\r\n        setElement : function(){\r\n            var $content = this.$el.children().detach(),\r\n                res      = setElement.apply( this, arguments );\r\n\r\n            this.$el.append( $content );\r\n            return res;\r\n        },\r\n\r\n        // cached instance of react component...\r\n        component : null,\r\n\r\n        render : function(){\r\n            var component = ReactDOM.render( this.element, this.el );\r\n\r\n            if( !this.component ){\r\n                if( component && component.trigger ){\r\n                    // bubble up backbone events, if any\r\n                    this.listenTo( component, 'all', function(){\r\n                        this.trigger.apply( this, arguments );\r\n                    } );\r\n                }\r\n\r\n                this.component = component;\r\n            }\r\n        },\r\n\r\n        unmountComponent : function(){\r\n            if( this.component && this.component.trigger ){\r\n                this.stopListening( this.component );\r\n            }\r\n\r\n            ReactDOM.unmountComponentAtNode( this.el );\r\n            this.component = null;\r\n        },\r\n\r\n        dispose : function(){\r\n            this.unmountComponent();\r\n            return dispose.apply( this, arguments );\r\n        }\r\n    } );\r\n\r\n    Object.defineProperty( ComponentView.prototype, 'model', {\r\n        get : function(){\r\n            this.component || this.render();\r\n            return this.component && this.component.model;\r\n        }\r\n    } );\r\n\r\n    return ComponentView;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/component-view.js\n ** module id = 5\n ** module chunks = 0\n **/","var React = require( 'react' );\r\n\r\nmodule.exports = React.createClass({\r\n    displayName : 'BackboneView',\r\n\r\n    propTypes : {\r\n        View : React.PropTypes.func.isRequired,\r\n        options : React.PropTypes.object\r\n    },\r\n\r\n    render : function(){\r\n        return React.DOM.div({\r\n            ref : 'subview',\r\n            className : this.props.className\r\n        });\r\n    },\r\n\r\n    componentDidMount : function(){\r\n        this._mountView();\r\n    },\r\n    componentDidUpdate : function(){\r\n        this._dispose();\r\n        this._mountView();\r\n    },\r\n    componentWillUnmount : function(){\r\n        this._dispose();\r\n    },\r\n\r\n    _mountView: function () {\r\n        var el = this.refs.subview,\r\n            p = this.props;\r\n\r\n        var view = this.view = p.options ? new p.View( p.options ) : new p.View();\r\n\r\n        el.appendChild( view.el );\r\n        view.render();\r\n    },\r\n\r\n    _dispose : function(){\r\n        var view = this.view;\r\n        if( view ){\r\n            view.stopListening();\r\n            if( view.dispose ) view.dispose();\r\n            this.refs.subview.innerHTML = \"\";\r\n            this.view = null;\r\n        }\r\n    }\r\n});\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/view-element.js\n ** module id = 6\n ** module chunks = 0\n **/"],"sourceRoot":""}