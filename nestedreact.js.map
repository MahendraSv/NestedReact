{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 719eda1e284b01df296d","webpack:///./src/main.js","webpack:///external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack:///external {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":\"ReactDOM\"}","webpack:///external {\"commonjs\":\"nestedtypes\",\"commonjs2\":\"nestedtypes\",\"amd\":\"nestedtypes\",\"root\":\"Nested\"}","webpack:///./src/createClass.js","webpack:///./src/component-view.js","webpack:///./src/view-element.js","webpack:///./src/value-link.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,yCAAwC,sBAAsB,EAAE;AAChE;;AAEA;AACA,YAAW,kBAAkB,qCAAqC,EAAE,EAAE;AACtE,YAAW,kBAAkB,qBAAqB,EAAE,EAAE;AACtD,YAAW,yBAAyB,6BAA6B,EAAE;AACnE,EAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;;;;;;;ACrEA,gD;;;;;;ACAA,gD;;;;;;ACAA,gD;;;;;;ACAA;AACA;;AAEA,wBAAuB,oBAAoB;;AAE3C;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,4CAA2C,wBAAwB;AACnE;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,gFAA+E,yBAAyB;AACxG;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;;AAEA,yCAAwC,QAAQ;AAChD;AACA;AACA,4CAA2C;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;ACvGA;AACA;;AAEA;AACA,4DAA2D;AAC3D;;AAEA;AACA;AACA,wBAAuB;AACvB;;AAEA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;AACb,UAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;;;;;;AC1EA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;AChFD;;AAEA;AACA;AACA;AACA,MAAK;;AAEL,yBAAwB,UAAU,EAAE;;AAEpC;AACA;AACA,8BAA6B,mBAAmB,EAAE;AAClD,iCAAgC,eAAe;AAC/C;AACA,MAAK;;AAEL,mCAAkC,eAAe,EAAE;AACnD,uBAAsB,mBAAmB,EAAE;AAC3C,0BAAyB,eAAe,EAAE;AAC1C,yBAAwB,yBAAyB,EAAE;;AAEnD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA,UAAS;AACT;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA,MAAK;;AAEL,4CAA2C,iBAAiB;AAC5D;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,gBAAgB;AACnC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,oBAAmB,gBAAgB;AACnC;AACA;AACA;;AAEA;AACA,E","file":"./nestedreact.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"), require(\"nestedtypes\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dom\", \"nestedtypes\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"React\"] = factory(require(\"react\"), require(\"react-dom\"), require(\"nestedtypes\"));\n\telse\n\t\troot[\"React\"] = factory(root[\"React\"], root[\"ReactDOM\"], root[\"Nested\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 719eda1e284b01df296d\n **/","var React    = require( 'react' ),\n    ReactDOM = require( 'react-dom' ),\n    Nested   = require( 'nestedtypes' ),\n    $        = Nested.$;\n\n// extend React namespace\nvar NestedReact = module.exports = Object.create( React );\n\n// listenToProps, listenToState, model, attributes, Model\nNestedReact.createClass = require( './createClass' );\n\nvar ComponentView = require( './component-view' );\n\n// export hook to override base View class used...\nNestedReact.useView = function( View ){\n    NestedReact._BaseView = ComponentView.use( View );\n};\n\nNestedReact.useView( Nested.View );\n\n// React component for attaching views\nNestedReact.subview = require( './view-element' );\n\n// Extend react components to have backbone-style jquery accessors\nvar Component     = React.createClass( { render : function(){} } ),\n    BaseComponent = Object.getPrototypeOf( Component.prototype );\n\nObject.defineProperties( BaseComponent, {\n    el  : { get : function(){ return ReactDOM.findDOMNode( this ); } },\n    $el : { get : function(){ return $( this.el ); } },\n    $   : { value : function( sel ){ return this.$el.find( sel ); } }\n} );\n\nvar ValueLink = require( './value-link' );\nvar Link = Nested.Link = ValueLink.Link;\nNested.link = ValueLink.link;\n\nvar ModelProto = Nested.Model.prototype;\n\nModelProto.getLink = function( attr ){\n    var model = this;\n\n    return new Link( function( x ){\n        if( arguments.length ){\n            model[ attr ] = x;\n        }\n\n        return model[ attr ];\n    });\n};\n\nvar CollectionProto = Nested.Collection.prototype;\n\nCollectionProto.getLink = function( model ){\n    var collection = this;\n\n    return new Link( function( x ){\n        var prev = Boolean( collection.get( model ) );\n\n        if( arguments.length ){\n            var next = Boolean( x );\n            if( prev !== next ){\n                collection.toggle( model, x );\n                return next;\n            }\n        }\n\n        return prev;\n    });\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/main.js\n ** module id = 0\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":\"ReactDOM\"}\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"commonjs\":\"nestedtypes\",\"commonjs2\":\"nestedtypes\",\"amd\":\"nestedtypes\",\"root\":\"Nested\"}\n ** module id = 3\n ** module chunks = 0\n **/","var React    = require( 'react' ),\n    Nested   = require( 'nestedtypes' );\n\nfunction forceUpdate(){ this.forceUpdate(); }\n\nvar Events = Object.assign( {\n    componentWillUnmount : function(){\n        this.stopListening();\n    }\n}, Nested.Events );\n\nvar ListenToProps = {\n    componentDidMount : function(){\n        var props    = this.props,\n            updateOn = this.listenToProps;\n\n        for( var prop in updateOn ){\n            var emitter = props[ prop ];\n            emitter && this.listenTo( emitter, updateOn[ prop ], forceUpdate );\n        }\n    }\n};\n\nvar ModelState = {\n    listenToState : 'change',\n    model         : null,\n\n    getInitialState : function(){\n        this.model = new this.Model();\n        // enable owner references in the model to access component props\n        this.model._owner = this;\n\n        return this.model;\n    },\n\n    // reference global store to fix model's store locator\n    getStore : function(){\n        this.model._defaultStore;\n    },\n\n    componentDidMount : function(){\n        var events = this.listenToState;\n        events && this.listenTo( this.model, events, forceUpdate );\n    },\n\n    componentWillUnmount : function(){\n        this.model._owner = null;\n        this.model.stopListening();\n    }\n};\n\nfunction createClass( spec ){\n    var mixins = spec.mixins || ( spec.mixins = [] );\n\n    var attributes = getModelAttributes( spec );\n    if( attributes ){\n        var BaseModel = spec.Model || Nested.Model;\n        spec.Model    = BaseModel.extend( { defaults : attributes } );\n    }\n\n    if( spec.Model ) mixins.push( ModelState );\n\n    if( spec.listenToProps ) mixins.unshift( ListenToProps );\n\n    mixins.push( Events );\n\n    var component  = React.createClass( spec );\n\n    // attach lazily evaluated backbone View class\n    var NestedReact = this;\n\n    Object.defineProperty( component, 'View', {\n        get : function(){\n            return this._View || ( this._View = NestedReact._BaseView.extend( { reactClass : component } ) );\n        }\n    });\n\n    return component;\n}\n\nfunction getModelAttributes( spec ){\n    var attributes = null;\n\n    for( var i = spec.mixins.length - 1; i >= 0; i-- ){\n        var mixin = spec.mixins[ i ];\n        if( mixin.attributes ){\n            attributes || ( attributes = {} );\n            Object.assign( attributes, mixin.attributes );\n        }\n    }\n\n    if( spec.attributes ){\n        if( attributes ){\n            Object.assign( attributes, spec.attributes );\n        }\n        else{\n            attributes = spec.attributes;\n        }\n    }\n\n    return attributes;\n}\n\nmodule.exports = createClass;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/createClass.js\n ** module id = 4\n ** module chunks = 0\n **/","var React    = require( 'react' ),\n    ReactDOM = require( 'react-dom' );\n\nmodule.exports.use = function( View ){\n    var dispose    = View.prototype.dispose || function(){},\n        setElement = View.prototype.setElement;\n\n    var ComponentView = View.extend( {\n        reactClass : null,\n        props      : {},\n        element    : null,\n\n        initialize : function( props ){\n            // memorise arguments to pass to React\n            this.options = props || {};\n            this.element = React.createElement( this.reactClass, this.options );\n        },\n\n        setElement : function(){\n            this.unmountComponent();\n            return setElement.apply( this, arguments );\n        },\n\n        // cached instance of react component...\n        component : null,\n        prevState : null,\n\n        render : function(){\n            var component = ReactDOM.render( this.element, this.el );\n            this.component || this.mountComponent( component );\n        },\n\n        mountComponent : function( component ){\n            this.component = component;\n\n            if( this.prevState ){\n                component.model.set( this.prevState );\n                this.prevState = null;\n            }\n\n            component.trigger && this.listenTo( component, 'all', function(){\n                this.trigger.apply( this, arguments );\n            });\n        },\n\n        unmountComponent : function(){\n            var component = this.component;\n\n            if( component ){\n                this.prevState = component.model && component.model.attributes;\n\n                if( component.trigger ){\n                    this.stopListening( component );\n                }\n\n                ReactDOM.unmountComponentAtNode( this.el );\n                this.component = null;\n            }\n        },\n\n        dispose : function(){\n            this.unmountComponent();\n            return dispose.apply( this, arguments );\n        }\n    } );\n\n    Object.defineProperty( ComponentView.prototype, 'model', {\n        get : function(){\n            this.component || this.render();\n            return this.component && this.component.model;\n        }\n    } );\n\n    return ComponentView;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/component-view.js\n ** module id = 5\n ** module chunks = 0\n **/","var React = require( 'react' );\n\nfunction shallowEqual(objA, objB) {\n    if (objA === objB) {\n        return true;\n    }\n\n    if (typeof objA !== 'object' || objA === null ||\n        typeof objB !== 'object' || objB === null) {\n        return false;\n    }\n\n    var keysA = Object.keys(objA);\n    var keysB = Object.keys(objB);\n\n    if (keysA.length !== keysB.length) {\n        return false;\n    }\n\n    // Test for A's keys different from B.\n    var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n    for (var i = 0; i < keysA.length; i++) {\n        if (!bHasOwnProperty(keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nmodule.exports = React.createClass({\n    displayName : 'BackboneView',\n\n    propTypes : {\n        View : React.PropTypes.func.isRequired,\n        options : React.PropTypes.object\n    },\n\n    shouldComponentUpdate : function( next ){\n        var props = this.props;\n        return next.View !== props.View || !shallowEqual( next.options, props.options );\n    },\n\n    render : function(){\n        return React.DOM.div({\n            ref : 'subview',\n            className : this.props.className\n        });\n    },\n\n    componentDidMount : function(){\n        this._mountView();\n    },\n    componentDidUpdate : function(){\n        this._dispose();\n        this._mountView();\n    },\n    componentWillUnmount : function(){\n        this._dispose();\n    },\n\n    _mountView: function () {\n        var el = this.refs.subview,\n            p = this.props;\n\n        var view = this.view = p.options ? new p.View( p.options ) : new p.View();\n\n        el.appendChild( view.el );\n        view.render();\n    },\n\n    _dispose : function(){\n        var view = this.view;\n        if( view ){\n            view.stopListening();\n            if( view.dispose ) view.dispose();\n            this.refs.subview.innerHTML = \"\";\n            this.view = null;\n        }\n    }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/view-element.js\n ** module id = 6\n ** module chunks = 0\n **/","var Nested = require( 'nestedtypes' );\n\nvar Link = exports.Link = Object.extend( {\n    constructor : function( val ){\n        this.val = val;\n    },\n\n    val : function( x ){ return x; },\n\n    properties :{\n        value : {\n            get : function(){ return this.val(); },\n            set : function( x ){ this.val( x ); }\n        }\n    },\n\n    requestChange : function( x ){ this.val( x ); },\n    get  : function(){ return this.val(); },\n    set  : function( x ){ this.val( x ); },\n    toggle : function(){ this.val( !this.val() ); },\n\n    contains : function( element ){\n        var link = this;\n\n        return new Link( function( x ){\n            var arr = link.val(),\n                prev = contains( arr, element );\n\n            if( arguments.length ){\n                var next = Boolean( x );\n                if( prev !== next ){\n                    link.val( x ? arr.concat( element ) : without( arr, element ) );\n                    return next;\n                }\n            }\n\n            return prev;\n        } );\n    },\n\n    // create boolean link for value equality\n    equals : function( asTrue ){\n        var link = this;\n\n        return new Link( function( x ){\n            if( arguments.length ) link.val( x ? asTrue : null );\n\n            return link.val() === asTrue;\n        });\n    }\n} );\n\nexports.link = function( reference ){\n    var getMaster = Nested.parseReference( reference );\n\n    function setLink( value ){\n        var link = getMaster.call( this );\n        link && link.val( value );\n    }\n\n    function getLink(){\n        var link = getMaster.call( this );\n        return link && link.val();\n    }\n\n    var LinkAttribute = Nested.attribute.Type.extend( {\n        createPropertySpec : function(){\n            return {\n                // call to optimized set function for single argument. Doesn't work for backbone types.\n                set : setLink,\n\n                // attach get hook to the getter function, if present\n                get : getLink\n            }\n        },\n\n        set : setLink\n    } );\n\n    var options       = Nested.attribute( { toJSON : false } );\n    options.Attribute = LinkAttribute;\n    return options;\n};\n\n// private array helpers\nfunction contains( arr, el ){\n    for( var i = 0; i < arr.length; i++ ){\n        if( arr[ i ] === el ) return true;\n    }\n\n    return false;\n}\n\nfunction without( arr, el ){\n    var res = [];\n\n    for( var i = 0; i < arr.length; i++ ){\n        var current = arr[ i ];\n        current === el || res.push( current );\n    }\n\n    return res;\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/value-link.js\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":""}